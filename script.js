// if you're reading this code, please don't look at all the splash messages here. it spoils the experience of finding new ones :)


window.splashes = [
    "Dukemz Gaming",
    "Any computer is a laptop if you're brave enough!",
    "Humans are basically cucumbers with anxiety.",
    "<a href='https://dukemz.github.io/posts/22/iamlivinginyourwalls/'>I am living in your walls.</a>",
    "üóø",
    "ü¶Ü",
    "üé∑ü¶Ü",
    "‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë",
    "‚ñì‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë",
    "‚ñì‚ñì‚ñë‚ñë‚ñë‚ñë‚ñë",
    "‚ñì‚ñì‚ñì‚ñë‚ñë‚ñë‚ñë",
    "‚ñì‚ñì‚ñì‚ñì‚ñë‚ñë‚ñë",
    "‚ñì‚ñì‚ñì‚ñì‚ñì‚ñë‚ñë",
    "‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñë", // lol it never loads
    "I forgor üíÄ",
    "Part of a complete breakfast!",
    "1 of your 5 a day!",
    "Batteries not included.",
    "No artificial flavours or preservatives.",
    "Not sold separately!",
    "doot doot",
    "I can't find the bug spray.",
    "This gradient is cool.",
    "Spreading positivity since 2018!",
    "This site uses biscuits... Technobiscuits.",
    "dukemz.",
    "dukemz?",
    "dukemz!",
    "dukemz,",
    "dukemz;",
    "dukemz:",
    "dukemz...",
    "dukemz~",
    "dukemz*",
    "Error on line 39. Reason: Could not think of a splash.",
    "Llama, llama, duck",
    "Potassium.",
    "plus9 when?",
    "The duck ate my homework.",
    "How do you pronounce scone?",
    "My house plant is going to die.",
    "INTERCONTINENTAL BALLISTIC PINEAPPLE!!!",
    "This message may appear.",
    "‚àö(-1) love you!",
    "Cucumber still watches us.",
    "Fry an egg with your face!",
    "Menger sponge.",
    "Moss Habitat!",
    "webstuff | webstuff yee",
    "Are biscuits a currency?",
    "Hello world!",
    "XHESSRBIUSCEDOBTCPM‚Ñ¢",
    "ALL OUR FOOD KEEPS BLOWING UP!",
    "üóø (moai) is an emotion that cannot be described.",
    ":)",
    "Which came first, the egg or the egg?",
    "BirbOS 10 will never happen.",
    "At least it's better than Cars 2",
    "test peanut",
    "The ducks are coming for you.",
    "NovoBot is not cancelled!",
    "You know what that means...",
    "PA-FISH",
    "Technologically advanced!",
    "youtu.be/0UWpTyuUxNo",
    "Dukemz Beanz - in stores now!",
    "Stop being reasonable, this is the internet",
    "I'm a potato.",
    "Aria Math!",
    "Can't count to 3!",
    "oh the missouri",
    "Hopefully not copyrighted!",
    "Not very original!",
    "There are 10 types of people<br>Those who understand binary, and those who don't.",
    "Run from your refrigerator!",
    "Wash your hands!",
    "Due ewe no wart the thyme ears?",
    "Time flies like an arrow and fruit flies like a banana...",
    "I wasn't originally going to get a brain transplant...<br>but then I changed my mind.",
    "Buffalo buffalo Buffalo buffalo buffalo buffalo Buffalo buffalo.",
    "Let in some sun!",
    "Boss rush time!",
    "It's dangerous to go alone, take <a href='/img/duck.jpg'>this!</a>",
    "I ran out of beans.",
    "Eating clocks is a very time consuming process.",
    "The most website ever!",
    "A website visit a day keeps... something away!",
    "A car powered on free range chickens<br>and designed by a team of hand picked potatoes!",
    "snap back to reality",
    "In marble walls as white as milk...",
    "Just upon a ridge in Scarlet Hill...",
    "Yazoo!",
    "Computer says no.",
    "Where are we now?",
    "You say too many splash texts, I say not enough!",
    "Don't forget",
    "Married to tea.",
    "There's a secret on the 404 page somewhere...",
    "But that's just a theory!",
    "Come back soon!",
    "--.- ..- .- -.-. -.-",
    "Bread is pain!",
    "Use bootstrap!",
    "Subscribe!",
    "I am under the water",
    "Ghoughpteighbteau tchoghs!",
    "I've been waiting for you.",
    "Welcome back!",
    "Did you miss me?",
    "YIPEE",
    "Wheatley crab!",
    "There is no among us joke.",
    "25th Greek island!",
    "WALL-E is the best robot.",
    "If you're seeing this, that means you exist!",
    "Windows XP was better.",
    "Where did the icon come from?",
    "12345 is a bad password!",
    "[redacted]",
    "Close range?!",
    "In the beginning the Universe was created.<br>This has made a lot of people very angry and been widely regarded as a bad move.",
    "Drink your water!",
    "There is no light, there is only duckness...",
    "DON'T LEAVE TREES FLOATING",
    "Could you pick up the beat for me please?",
    "timeout /t 10 > nul",
    "192.168.1.254",
    "For legal reasons, this is a joke.",
    "What if Dukemz isn't a duck?",
    "This sentence is false.",
    "There is a skeleton in my closet making spaghetti.",
    "D1 D1 D2 A1 G#1 G1 F1 D1 F1 G1",
    "F1 G1 C1 G1 A1 C2 B1 A1 F1 G1 C1 C1 C1 D1 D1 F1",
    "subscribe to dxl44",
    "Your toes, hand em over.",
    "Now with extra duck!",
    "There was never any context to begin with.",
    '<a href="https://dukemz.github.io/SinthaliaPrototypeWeb/">Shh, this is a secret...</a>',
    "Please ask me any questions you have!",
    "Dorime... interimo adapare dorime...",
    "Someone spilled paint to the left of this text on my desktop!",
    "Peace was always an option.",
    "Unfortunately...",
    "That's sad. I'm sad. How did this happen?",
    ".zmekud",
    "Cats are adorable.",
    "if(variable === undefined) throw new MentalBreakdownError()",
    "Educate your friends on anti-racism!",
    "hi",
    "I'm starting to run out of things to put here...",
    "I've spent an unreasonable amount of time writing these.",
    "Please help me",
    "Lobsters inshore!",
    "Lobsters outshore!",
    ":|",
    "Absolutely NO owo's on this site.",
    "Don't uwu. $30 penalty.",
    "it's dukemzin' time",
    "and then he dukemz'd all over the place",
    "my favourite part of the dukemz movie",
    "this cat is r",
    "Top 10 numbers of all time!",
    "The fog is coming.",
    "The frog is coming.",
    "It has been done.",
    "I'm going to go ahead and go have a go.",
    "You will never find out what the numbers mean.",
    "412: I'm a teapot!",
    "I'm going to invent Teascript.",
    " ",
    "gloopchita",
    "There may be birds trapped in my ribcage.",
    "Beware of robot dogs.",
    "Why is the dog saying 'Kablinky' while holding a syringe?",
    "Welcome to the world of coding! Survive while you can.",
    '<a href="https://youtu.be/-O1wszcVF1c">https://youtu.be/-O1wszcVF1c</a>',
    '<a href="https://youtu.be/-O1wszcVF1c">reads the entire tpmc wiki page in vc</a>',
    // ljaldy start
    "On a scale of 1 to 10, what's your favourite colour of the alphabet?",
    "Converting pasta to concrete since 2021!",
    "sometimes gaming.",
    "On the shores of a purple sea.",
    "Autumn leaves are falling down.",
    "bn fn",
    "Ping!",
    "Pong!",
    "Loading 404 page...",
    "Rerouting engine power for biscuit production...",
    "= )",
    "OUR NEW [[soon to be old]] [upgraded!] WEBSITE!!",
    "Mail mail you mail mail and mail mail you mail mail and",
    "Was that the duck of 87?!",
    "A worthy excuse of procrastination.",
    "*breathes*",
    "Only 70% banana!",
    "wen the cold doesnt coldulate the ammonia",
    "Is water wet? Well, here's a better question: is frost frosty?",
    "It's delicious. Must be flavour text.",
    "Slang for 'do you kemz?'",
    "Simulatneously too much and not enough time to use.",
    "/give @e fun_times",
    "Is cheese cheese?",
    "What if this website... is cake?",
    "This website was brought to you by...",
    "Num lock on, caps lock off, scroll lock idk.",
    "h",
    "no memes in #general",
    "wait a minute...",
    "only one finger and two toes",
    "The bugs are evolving...",
    "Concatenating integers...",
    "A+ for effort.",
    "ENABLE THE BAGEL",
    "Do not feed the pigeons.",
    "Formerly known as dukemz.",
    "v2",
    "For the fans that spin really fast.",
    "Don't judge a book by its movie.",
    "Who did the physics of a bee flying?",
    "On of th lttrs on my kyboard is brokn, snd hlp.",
    "dstgdpm10h",
    "Greetings and salutations!",
    "12 13 21 22 23 24 32 34 41 42 44", // grid
    "How many holes in a polo?",
    "Generating content... This may take a while.",
    "Nothing does not rhyme with orange.",
    "Dihydrogen monoxide is not dangerous.",
    "Hello there.", // back again
    "Each Peach Pear Plum",
    "uz.demk",
    "<a href='https://www.youtube.com/watch?v=-1oRezdQEzM'>]]]</a>",
    "Me has ungood inglish.",
    "Insectophobe's nightmare.",
    "[REDUCKTED]",
    "Please keep hands inside the cart at all times.",
    "Duke of the MZ",
    "How did we get here?",
    "Don't feed ducks bread.",
    "It's-a-me!",
    "[object Object]",
    "typeof(Nan) = number;",
    "Now in 2D!",
    "stonks",
    "Eat your veggies!",
    "A duck walked up to the lemonade stand...",
    "<a href='https://dukemz.github.io/'>Click here for another splash!</a>",
    "Welcome to Dukemz's Pizza Emporium, how may we help you?",
    "Knock knock.",
    "Why did the duck cross the road???????",
    "<a href='https://bit.ly/3EjjNW8'>CLICK HERE!!!</a>",
    "Did you know?\nThere is only one splash with the word 'deposit' in it.",
    "xnopyt",
    // this one might break formatting
    // "Why am I over here?                                                                  ",
    "Splash Challenge: Do a push-up.",
    "camelCaseIsUsefulForSeparatingWordsInCode",
    "Take your age. Add 2. Subtract 2. That's your age.",
    "This splash has only 41 characters in it.",
    "Do I smell burning chicken?",
    "19th of August 2024 17:32:47:10262734", // what
    "Don't forget.",
    "#stopusinghashtags",
    "smh forgot to capitalise dukemz.",
    "ping-pong = png(i-o)",
    "colourize",
    "colorise", // american spelling
    "dUkEmZ.",
    "return null;",
    "<a href='https://dukemz.github.io/whyareyoulookinghere'>[Hyperlink Blocked]</a>",
    "Greetings traveller, rest here for a while.",
    "3... 2... 1...",
    "Splash Challenge: Tidy your room/workspace.",
    // "owo", // no.
    "Minced garlic!",
    "Are you ready kids?",
    "Heyo!",
    "What... cactus..?",
    "{groovy brackets}",
    "sdrawkcab",
    "For more Dukemz content!",
    "Duck? *bonk*",
    "Welcome to the Internet.",
    "2^2^2^2",
    "Coincidentally, I'm reading this too.",
    "e g g",
    "Peace, love, and ducks.",
    "Splash Challenge: Touch grass (outside)",
    "You are now breathing manually.",
    //        "Forgot to indent correctly.     ", // also might break formatting
    "Now with even more bugs!",
    "It's not a feature, it's a bug.",
    "Spiderduck, spiderduck, naturally has webbed feet.",
    "I wonder what Ctrl + Shift + W does?",
    "A group of ducks is a waddling.",
    "Chocolate can be good for you, but be careful!",
    "splash_number += 1",
    "Biscuits - dunk 'em.",
    "100% random!",
    "Can you find a secret?",
    "Still on the duck hunt.\n(No ducks were harmed in the making of this splash text.)",
    "I'm a spring duckling and I'm having a ball!",
    "Lookie lookie it's a cookie üç™",
    "I'm ready for a break... <br>Here it is.",
    "Melee?!", // what
    "Travelling back in time since 2034!",
    "Freshly-baked biscuits!",
    "Computer will.",
    "Computer knows.",
    "You've been put on hold, someone will see you shortly.",
    "Hello to see you now, goodbye to see you later."
    // ljaldy end 
]
splashes.push(`There are ${splashes.length} splash texts. Isn't that weird?`);

// everything below here is tb's stuff

// https://francoisromain.medium.com/smooth-a-svg-path-with-cubic-bezier-curves-e37b49d46c74
const line = (pointA, pointB) => {
    const lengthX = pointB[0] - pointA[0]
    const lengthY = pointB[1] - pointA[1]
    return {
      length: Math.sqrt(Math.pow(lengthX, 2) + Math.pow(lengthY, 2)),
      angle: Math.atan2(lengthY, lengthX)
    }
}

const controlPoint = (current, previous, next, reverse) => {
    // When 'current' is the first or last point of the array
    // 'previous' or 'next' don't exist.
    // Replace with 'current'
    const p = previous || current
    const n = next || current
    // The smoothing ratio
    const smoothing = 0.2
    // Properties of the opposed-line
    const o = line(p, n)
    // If is end-control-point, add PI to the angle to go backward
    const angle = o.angle + (reverse ? Math.PI : 0)
    const length = o.length * smoothing
    // The control point position is relative to the current point
    const x = current[0] + Math.cos(angle) * length
    const y = current[1] + Math.sin(angle) * length
    return [x, y]
}

const bezierCommand = (point, i, a) => {
    // start control point
    const [cpsX, cpsY] = controlPoint(a[i - 1], a[i - 2], point)
    // end control point
    const [cpeX, cpeY] = controlPoint(point, a[i - 1], a[i + 1], true)
    return `C ${cpsX},${cpsY} ${cpeX},${cpeY} ${point[0]},${point[1]}`
}

const svgPath = (points, command) => {
    // build the d attributes by looping over the points
    const d = points.reduce((acc, point, i, a) => i === 0
      // if first point
      ? `M ${point[0]},${point[1]}`
      // else
      : `${acc} ${command(point, i, a)}`
    , '')
    return d;
}


//

const recalcShape = () => {
    // lol sorry for putting this here - duck
    const sploosh = splashes[Math.floor(Math.random()*splashes.length)];
    
    // biscuit to the rescue with jquery (hopefully)
    if ($("#randomSplash").length) $("#randomSplash").html(sploosh);
    //let splText = document.getElementById("randomSplash")?.innerHTML;
    //console.log(splText)
    //if(splText !== undefined) splText = sploosh;
    
    $(".shape-thing").empty();
    let points = [[0, 0]];
    for (let y = 0; y < $(document).height() * 6; y += 200) {
        points.push([330 + (60 - (120 * (Math.random()))), y]);
    }

    let path = "";

    for (let i = 0; i < points.length; i++) {
        path += `L ${points[i][0]} ${points[i][1]} `;
    }

    path += `L 0 ${points[points.length - 1][1]} Z`

    $(".background").css("height", `${$(document).height()}px`)

    $(".shape-thing").append($(`
    <svg viewBox="0 0 500 ${points[points.length - 1][1]}" xmlns="http://www.w3.org/2000/svg">
        <linearGradient gradientUnits="userSpaceOnUse" x1="148.964" y1="44.905" x2="148.964" y2="492.678" id="gradient-0" gradientTransform="matrix(0.918522, 0.395369, -0.408856, 0.949858, 71.08396, -91.186193)" spreadMethod="pad">
            <stop offset="0" style="stop-color: rgb(11, 184, 253);"/>
            <stop offset="1" style="stop-color: rgb(90, 66, 236);"/>
        </linearGradient>
        <path d="${svgPath(points, bezierCommand)} L 0 ${points[points.length - 1][1]} Z" fill="url(#gradient-0)" />
    </svg>
    `));
}

$(window).resize(_.debounce(recalcShape, 200));
